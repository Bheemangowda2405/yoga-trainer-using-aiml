<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Surya Namaskar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='suryanamaskara/styles-sn.css') }}" />
    <style>
      /* Override body to remove any extra space */
      body {
        margin: 0;
        padding: 0;
      }
      
      /* Adjust app-header to account for navbar */
      .app-header {
        position: relative !important;
        top: 0 !important;
        margin-bottom: 0;
        margin-top: 0;
      }
      
      /* Ensure navbar is above app-header */
      .navbar {
        position: sticky;
        top: 0;
        z-index: 100;
        margin-bottom: 0;
        background: #fff;
        padding: 0;
      }
      
      .nav-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 20px;
        max-width: 1200px;
        margin: 0 auto;
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .nav-logo {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .nav-logo img {
        height: 40px;
        border-radius: 50%;
      }
      
      .logo-text {
        font-size: 1.2rem;
        font-weight: 700;
        color: #333;
      }
      
      .nav-links {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 8px;
      }
      
      .nav-links li a {
        padding: 8px 14px;
        text-decoration: none;
        color: #333;
        font-weight: 500;
        border-radius: 8px;
        transition: background 0.3s;
      }
      
      .nav-links li a:hover {
        background: #f0f0f0;
      }
      
      .nav-actions {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      /* Nav Toggle (Hamburger) */
      .nav-toggle {
        display: none;
        flex-direction: column;
        justify-content: space-between;
        width: 28px;
        height: 20px;
        cursor: pointer;
        background: transparent;
        border: none;
        padding: 0;
        z-index: 101;
      }
      
      .nav-toggle span {
        display: block;
        width: 100%;
        height: 3px;
        background: #1a1a2e;  /* Darker color for visibility */
        border-radius: 3px;
        transition: all 0.3s ease;
        box-shadow: 0 1px 2px rgba(0,0,0,0.2);  /* Add subtle shadow */
      }
      
      .nav-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(6px, 6px);
      }
      
      .nav-toggle.active span:nth-child(2) {
        opacity: 0;
      }
      
      .nav-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(6px, -6px);
      }
      
      /* Main app container */
      #app {
        margin-top: 0;
        padding-top: 0;
        background: var(--beige);
        min-height: 100vh;
      }
      
      .app-content {
        margin-top: 0;
        padding-top: 0;
        background: var(--beige);
      }
      
      #home {
        padding-top: 0;
        margin-top: 0;
      }
      
      .screen {
        padding-top: 0;
        background: var(--beige);
      }
      
      /* User info styling */
      .navbar .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .navbar .user-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #22c55e;
      }
      
      .navbar .user-avatar-placeholder {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: #f0f0f0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        border: 2px solid #22c55e;
      }
      
      .navbar .username {
        font-weight: 600;
        color: #333;
        font-size: 14px;
        max-width: 120px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      
      .navbar .btn-logout {
        background-color: #ef4444;
        color: white;
        padding: 6px 14px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 500;
        font-size: 14px;
        transition: background-color 0.3s ease;
        white-space: nowrap;
      }
      
      .navbar .btn-logout:hover {
        background-color: #dc2626;
      }
      
      /* Hero image */
      .hero {
        max-width: 100%;
        margin: 0 0 14px 0;
        background: transparent;
        overflow: hidden;
        border-radius: 14px;
        position: relative;
        max-height: 400px;
      }
      
      .hero img {
        width: 100%;
        height: auto;
        max-height: 400px;
        display: block;
        object-fit: cover;
        object-position: center;
      }
      
      /* App content container */
      .app-content {
        max-width: 820px !important;
        margin: 0 auto !important;
        padding: 0 16px 96px !important;
        background: var(--beige) !important;
      }
      
      /* ==================== MOBILE RESPONSIVE ==================== */
      @media (max-width: 768px) {
        .nav-container {
          padding: 10px 15px;
          position: relative;
        }
        
        .nav-logo img {
          height: 32px;
        }
        
        .logo-text {
          font-size: 1rem;
        }
        
        /* Show hamburger menu */
        .nav-toggle {
          display: flex;
          order: 3;
        }
        
        /* Hide nav links by default */
        .nav-links {
          display: none;
          order: 4;
          width: 100%;
          flex-direction: column;
          gap: 5px;
          padding-top: 15px;
          margin-top: 10px;
          border-top: 1px solid #e5e5e5;
        }
        
        .nav-links.active {
          display: flex;
        }
        
        .nav-links li {
          width: 100%;
        }
        
        .nav-links li a {
          display: block;
          padding: 12px 16px;
          text-align: center;
          background: #f5f5f5;
          border-radius: 8px;
        }
        
        /* User section */
        .nav-actions {
          order: 2;
          margin-left: auto;
          margin-right: 10px;
        }
        
        .navbar .user-info {
          gap: 6px;
        }
        
        .navbar .user-avatar,
        .navbar .user-avatar-placeholder {
          width: 32px;
          height: 32px;
        }
        
        .navbar .username {
          display: none;
        }
        
        .navbar .btn-logout {
          padding: 5px 10px;
          font-size: 12px;
        }
        
        .navbar .btn-login {
          padding: 6px 12px !important;
          font-size: 12px !important;
        }
        
        /* App header */
        .app-header {
          padding: 10px;
        }
        
        .app-header h1 {
          font-size: 16px;
        }
        
        /* Hero */
        .hero {
          margin: 0 0 10px 0;
          border-radius: 10px;
          max-height: 250px;
        }
        
        .hero img {
          max-height: 250px;
        }
        
        /* Cards */
        .card {
          padding: 14px;
          margin-bottom: 12px;
        }
        
        .card-title {
          font-size: 18px;
        }
        
        .info-card p {
          font-size: 14px;
          line-height: 1.6;
        }
        
        /* Benefits grid - stack on mobile */
        .benefits-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }
        
        .benefit {
          display: flex;
          align-items: center;
          gap: 12px;
          text-align: left;
          padding: 12px;
        }
        
        .benefit-emoji {
          font-size: 28px;
          margin-bottom: 0;
        }
        
        .benefit-title {
          font-size: 14px;
        }
        
        .benefit-sub {
          font-size: 12px;
        }
        
        /* Tabbar */
        .tabbar {
          padding: 8px 10px;
          gap: 6px;
        }
        
        .tab {
          padding: 10px 8px;
          font-size: 13px;
        }
        
        .tab-start {
          padding: 10px 12px;
          font-size: 13px;
        }
        
        /* Speed options */
        .speed-options {
          gap: 10px;
        }
        
        .speed-btn {
          min-width: 70px;
          padding: 12px 10px;
        }
        
        .speed-icon {
          font-size: 20px;
        }
        
        .speed-btn span {
          font-size: 12px;
        }
        
        /* Level table */
        .level-table-header {
          font-size: 12px;
          padding: 6px 10px;
        }
        
        .level-row {
          padding: 10px;
          gap: 10px;
        }
        
        .level-name {
          font-size: 14px;
        }
        
        .rounds-col, .duration-col {
          font-size: 13px;
        }
        
        /* Practice screen */
        .practice-wrap {
          padding: 15px;
        }
        
        .practice-head {
          flex-direction: column;
          align-items: center;
          gap: 8px;
          margin-bottom: 12px;
        }
        
        .practice-step {
          font-size: 14px;
        }
        
        .practice-title {
          font-size: 18px;
          text-align: center;
        }
        
        .practice-mantra {
          font-size: 12px;
          text-align: center;
          min-width: auto;
        }
        
        .practice-controls {
          gap: 6px;
          flex-wrap: wrap;
        }
        
        .control-btn {
          padding: 8px 12px;
          font-size: 13px;
        }
        
        .breath-box {
          min-width: 90px;
          padding: 8px 10px;
          font-size: 13px;
        }
        
        /* Countdown */
        .countdown-text {
          font-size: 22px;
        }
        
        .practice-countdown {
          width: 120px;
          height: 120px;
          font-size: 52px;
        }
        
        /* Back button */
        .back-btn {
          left: 8px !important;
          top: 8px !important;
          width: 36px;
          height: 36px;
          font-size: 16px;
        }
      }
      
      /* Small mobile */
      @media (max-width: 480px) {
        .nav-container {
          padding: 8px 12px;
        }
        
        .nav-logo img {
          height: 28px;
        }
        
        .logo-text {
          font-size: 0.9rem;
        }
        
        .nav-toggle {
          display: flex !important;  /* Ensure visibility */
          width: 24px;
          height: 18px;
          order: 3;
        }
        
        .nav-toggle span {
          height: 2px;
          background: #1a1a2e !important;  /* Ensure dark color */
        }
        
        .navbar .user-avatar,
        .navbar .user-avatar-placeholder {
          width: 28px;
          height: 28px;
        }
        
        .navbar .btn-logout {
          padding: 4px 8px;
          font-size: 11px;
        }
        
        .app-header h1 {
          font-size: 14px;
        }
        
        .hero {
          max-height: 200px;
        }
        
        .hero img {
          max-height: 200px;
        }
        
        .card {
          padding: 12px;
        }
        
        .card-title {
          font-size: 16px;
        }
        
        .info-card p {
          font-size: 13px;
        }
        
        .bullets {
          padding-left: 15px;
        }
        
        .bullets li {
          font-size: 13px;
          margin: 6px 0;
        }
        
        .benefit {
          padding: 10px;
        }
        
        .benefit-emoji {
          font-size: 24px;
        }
        
        .benefit-title {
          font-size: 13px;
        }
        
        .benefit-sub {
          font-size: 11px;
        }
        
        /* Speed options - stack */
        .speed-options {
          flex-direction: column;
          gap: 8px;
        }
        
        .speed-btn {
          width: 100%;
          flex-direction: row;
          justify-content: center;
          padding: 12px;
        }
        
        .speed-icon {
          margin-right: 10px;
        }
        
        /* Level table - simplified */
        .level-table-header {
          display: none;
        }
        
        .level-row {
          grid-template-columns: 1fr;
          gap: 4px;
          padding: 12px;
        }
        
        .level-col {
          margin-bottom: 4px;
        }
        
        .rounds-col::before {
          content: "Rounds: ";
          color: var(--muted);
        }
        
        .duration-col::before {
          content: "Duration: ";
          color: var(--muted);
        }
        
        .rounds-col, .duration-col {
          text-align: left;
          font-size: 12px;
        }
        
        .practice-title {
          font-size: 16px;
        }
        
        .control-btn {
          padding: 6px 10px;
          font-size: 12px;
        }
        
        .voice-toggle span {
          font-size: 12px !important;
        }
        
        .practice-countdown {
          width: 100px;
          height: 100px;
          font-size: 44px;
        }
      }
      
      /* Very small devices */
      @media (max-width: 360px) {
        .nav-logo img {
          height: 24px;
        }
        
        .logo-text {
          font-size: 0.8rem;
        }
        
        .navbar .btn-logout {
          padding: 3px 6px;
          font-size: 10px;
        }
        
        .hero {
          max-height: 160px;
        }
        
        .card-title {
          font-size: 15px;
        }
        
        .practice-controls {
          flex-direction: column;
        }
        
        .practice-controls > * {
          width: 100%;
        }
        
        .voice-toggle {
          margin-left: 0 !important;
          justify-content: center;
        }
      }
      
      /* Touch-friendly */
      @media (hover: none) and (pointer: coarse) {
        .nav-links li a,
        .tab,
        .tab-start,
        .speed-btn,
        .level-row,
        .control-btn,
        .setup-start-btn,
        .poses-start-btn {
          min-height: 44px;
        }
      }
      
      /* Extra small devices - ensure hamburger visibility */
      @media (max-width: 420px) {
        .nav-toggle {
          display: flex !important;
          flex-direction: column;
          justify-content: space-between;
          width: 22px;
          height: 16px;
          order: 3;
        }
        
        .nav-toggle span {
          display: block !important;
          width: 100%;
          height: 2px;
          background: #1a1a2e !important;
          border-radius: 2px;
        }
        
        .nav-container {
          flex-wrap: wrap;
        }
        
        .nav-actions {
          order: 2;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <img
            src="{{ url_for('static', filename='uploads/yogologo.jpg') }}"
            alt="Yoga Logo"
          />
          <span class="logo-text">AI Yoga Trainer</span>
        </div>
        
        <!-- Hamburger Toggle -->
        <div class="nav-toggle" id="navToggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
        
        <div class="nav-actions">
          {% if current_user.is_authenticated %}
          <div class="user-info">
            {% if current_user.user_data and current_user.user_data.profile and current_user.user_data.profile.avatar_url %}
            <img src="{{ current_user.user_data.profile.avatar_url }}" alt="Avatar" class="user-avatar" />
            {% else %}
            <div class="user-avatar-placeholder">üë§</div>
            {% endif %}
            <span class="username">{{ current_user.username }}</span>
            <a href="{{ url_for('logout', next='/') }}" class="btn btn-logout">Logout</a>
          </div>
          {% else %}
          <a
            href="{{ url_for('login') }}"
            class="btn btn-login"
            style="
              background-color: #22c55e;
              color: #ffffff;
              padding: 8px 14px;
              border-radius: 8px;
              text-decoration: none;
              font-weight: 600;
            "
            >Login</a
          >
          {% endif %}
        </div>
        
        <ul class="nav-links" id="navLinks">
          <li><a href="{{ url_for('index') }}">Home</a></li>
          <li><a href="{{ url_for('yoga_manual') }}">Yoga Manual</a></li>
          <li><a href="{{ url_for('dashboard') }}">Dashboard</a></li>
          <li><a href="{{ url_for('profile') }}">Profile</a></li>
        </ul>
      </div>
    </nav>

    <header class="app-header">
      <button class="back-btn" id="backBtn" aria-label="Back">‚Üê</button>
      <h1 class="title">Surya Namaskar</h1>
      <span></span>
    </header>

    <main id="app" class="app-content">
      <section id="home" class="screen active">
        <div class="hero">
          <img
            src="{{ url_for('static', filename='suryanamaskara/fit-woman-doing-yoga-sun-salutation-surya-namaskar-sivananda-style-asana-sequence-on-mat-at.webp') }}"
            alt="Surya Namaskar"
          />
        </div>

        <div class="card info-card">
          <h2 class="card-title">Introduction</h2>
          <p>
            Welcome to <strong>SURYA NAMASKAR</strong>, a calm and elegant
            exploration of the ancient <em>Sun Salutation</em> ‚Äî a flowing
            sequence of twelve postures that harmonizes breath, movement, and
            mindful awareness.
          </p>
          <p>
            Practiced regularly, it improves flexibility, posture, and strength
            while easing stress and enhancing focus.
          </p>
        </div>

        <div class="benefits-grid">
          <div class="benefit card">
            <div class="benefit-emoji">üßò‚Äç‚ôÄÔ∏è</div>
            <div>
              <div class="benefit-title">Mindful Movement</div>
              <div class="benefit-sub">Breath‚Äëled flow for balance</div>
            </div>
          </div>
          <div class="benefit card">
            <div class="benefit-emoji">üí™</div>
            <div>
              <div class="benefit-title">Strength & Flexibility</div>
              <div class="benefit-sub">Engage core, legs, and spine</div>
            </div>
          </div>
          <div class="benefit card">
            <div class="benefit-emoji">üß†</div>
            <div>
              <div class="benefit-title">Clarity & Focus</div>
              <div class="benefit-sub">Reduce stress, improve calm</div>
            </div>
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">History and Origin</h2>
          <p>
            The practice has ancient roots in India and is traditionally
            performed facing the rising sun. The term "Surya Namaskar" is
            derived from Sanskrit: "Surya" means sun and "Namaskar" means
            salutation.
          </p>
        </div>

        <div class="card">
          <h2 class="card-title">Best Time to Practice</h2>
          <p>
            Anytime of day works; however, sunrise yields the best results as
            sun exposure activates our solar plexus.
          </p>
        </div>

        <div class="card">
          <h2 class="card-title">Precautions</h2>
          <ul class="bullets">
            <li>Don't eat or drink immediately before or after practice.</li>
            <li>Do a brief warm-up and synchronize with breath.</li>
            <li>Consult a doctor for medical concerns.</li>
            <li>Practice in a peaceful, well‚Äëventilated place.</li>
          </ul>
        </div>

        <div class="card">
          <h2 class="card-title">Practice Tips</h2>
          <ul class="bullets">
            <li><strong>Consistency:</strong> Practice daily, preferably in the morning.</li>
            <li><strong>Breathing:</strong> Synchronize each movement with deep breaths.</li>
            <li><strong>Listen to your body:</strong> Modify poses as needed.</li>
            <li><strong>Repetitions:</strong> Start with a few rounds and increase gradually.</li>
          </ul>
        </div>
      </section>

      <section id="setup" class="screen">
        <div class="card">
          <h2 class="card-title">Choose Your Speed</h2>
          <div class="speed-options">
            <button class="speed-btn" data-speed="soft">
              <div class="speed-icon">üê¢</div>
              <span>Soft</span>
            </button>
            <button class="speed-btn" data-speed="regular">
              <div class="speed-icon">ü¶å</div>
              <span>Regular</span>
            </button>
            <button class="speed-btn" data-speed="accelerated">
              <div class="speed-icon">üêÜ</div>
              <span>Accelerated</span>
            </button>
          </div>
          <p id="roundTimeNote" class="muted" style="margin: 8px 0 0 0"></p>
        </div>

        <div class="card">
          <div id="learnCard" class="learn-card" tabindex="0" role="button">
            <div class="learn-copy">
              <div class="learn-sub">How to do?</div>
              <div class="learn-title">Learn Surya Namaskar <span class="chev">‚Ä∫</span></div>
            </div>
            <img class="learn-thumb" src="{{ url_for('static', filename='suryanamaskara/fit-woman-doing-yoga-sun-salutation-surya-namaskar-sivananda-style-asana-sequence-on-mat-at.webp') }}" alt="Learn" />
          </div>
        </div>

        <div class="card">
          <h2 class="card-title">Choose a level</h2>
          <div class="level-table">
            <div class="level-table-header">
              <div class="level-col">Level</div>
              <div class="rounds-col">Rounds</div>
              <div class="duration-col">~Duration</div>
            </div>
            <div class="level-table-body">
              <label class="level-row selected">
                <input type="radio" name="level" value="beginner" checked />
                <div class="level-col">
                  <span class="radio-btn"></span>
                  <span class="level-name">Beginner</span>
                </div>
                <div class="rounds-col">12</div>
                <div class="duration-col">~12 Min</div>
              </label>
              <label class="level-row">
                <input type="radio" name="level" value="intermediate" />
                <div class="level-col">
                  <span class="radio-btn"></span>
                  <span class="level-name">Intermediate</span>
                </div>
                <div class="rounds-col">51</div>
                <div class="duration-col">~51 Min</div>
              </label>
              <label class="level-row">
                <input type="radio" name="level" value="custom" />
                <div class="level-col">
                  <span class="radio-btn"></span>
                  <span class="level-name">Custom (1 to 500)</span>
                </div>
                <div class="rounds-col">5</div>
                <div class="duration-col">~5 Min</div>
              </label>
            </div>
          </div>
        </div>

        <div class="card">
          <label class="checkbox-option">
            <input type="checkbox" id="recoveryIntervals" checked />
            <span class="checkmark"></span>
            <span class="checkbox-text">Include recovery intervals between rounds</span>
          </label>
        </div>

        <button class="setup-start-btn" id="setupStartBtn">‚ñ∂ Start Practice</button>
      </section>

      <section id="poses" class="screen">
        <div class="card card--header">
          <div class="card-head">
            <div>
              <h2 class="card-title" style="margin: 0">All Poses</h2>
              <p class="muted" style="margin: 4px 0 0 0">Follow the steps in order.</p>
            </div>
          </div>
        </div>
        <div id="poses-grid" class="poses-grid"></div>
        <div class="poses-start-wrap">
          <button class="poses-start-btn" id="posesStartBtn">‚ñ∂ Start Practice</button>
        </div>
      </section>
    </main>

    <section id="practice" class="practice-screen">
      <div class="practice-wrap">
        <div class="practice-head">
          <div class="practice-step" id="practiceStep"></div>
          <h2 class="practice-title" id="practiceTitle"></h2>
          <div class="practice-mantra" id="practiceMantra" aria-live="polite"></div>
        </div>

        <div class="practice-stage">
          <img id="practiceImage" class="practice-image" alt="Current pose" />
          <div class="fade-layer" id="fadeLayer"></div>
          <div class="countdown-overlay" id="countdownOverlay">
            <div class="countdown-text">Get Ready</div>
            <div class="practice-countdown" id="practiceCountdown" aria-live="polite"></div>
          </div>
        </div>

        <div class="practice-progress">
          <div class="progress-track">
            <div class="progress-bar" id="progressBar"></div>
          </div>
        </div>

        <div class="practice-controls">
          <div id="breathBox" class="breath-box exhale">Exhale</div>
          <button id="btnPause" class="control-btn">Pause</button>
          <button id="btnResume" class="control-btn">Resume</button>
          <button id="btnRestart" class="control-btn">Restart</button>
          <label class="voice-toggle">
            <input type="checkbox" id="soundToggle" checked />
            <span style="font-weight: 700; margin-left: 6px; color: var(--muted)">Sound</span>
          </label>
          <button id="exitBtn" class="control-btn">Exit</button>
        </div>

        <div class="practice-complete" id="practiceComplete" aria-live="polite">Session Complete ‚ú®</div>
      </div>
    </section>

    <nav class="tabbar">
      <button class="tab active" data-target="home">Home</button>
      <button class="tab" data-target="poses">Poses</button>
      <button class="tab-start" id="navStartBtn">‚ñ∂ Start</button>
    </nav>

    <!-- Exit confirmation dialog -->
    <div class="confirm-overlay" id="exitConfirm" role="dialog" aria-modal="true" hidden>
      <div class="confirm-dialog" role="document">
        <h3 id="exitConfirmTitle">Exit practice?</h3>
        <p class="muted">Do you want to exit the session or resume practice?</p>
        <div class="confirm-actions">
          <button id="confirmExit" class="control-btn">Exit</button>
          <button id="confirmResume" class="control-btn primary">Resume</button>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='suryanamaskara/app.js') }}"></script>
    <script>
      // Mobile Navigation Toggle
      document.addEventListener('DOMContentLoaded', function() {
        const navToggle = document.getElementById('navToggle');
        const navLinks = document.getElementById('navLinks');
        
        if (navToggle && navLinks) {
          navToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            navToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
          });
          
          // Close menu when clicking a link
          navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', function() {
              navToggle.classList.remove('active');
              navLinks.classList.remove('active');
            });
          });
          
          // Close menu when clicking outside
          document.addEventListener('click', function(event) {
            if (!navLinks.contains(event.target) && !navToggle.contains(event.target)) {
              navToggle.classList.remove('active');
              navLinks.classList.remove('active');
            }
          });
        }
        
        // Override back button to go to dashboard
        const backBtn = document.getElementById('backBtn');
        if (backBtn) {
          backBtn.addEventListener('click', function(e) {
            const practiceScreen = document.getElementById('practice');
            if (practiceScreen && practiceScreen.classList.contains('active')) {
              return; // Let original handler deal with it
            }
            e.preventDefault();
            window.location.href = "/dashboard";
          });
        }
      });
    </script>
  </body>
</html>
